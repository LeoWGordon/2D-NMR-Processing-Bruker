# 2D-NMR-Processing-Bruker

MATLAB program for quick 2D NMR processing. 
Requires the raw bruker data, and the text files generated by the TopSpin au command "convbin2asc" for the 1D spectra.
Requires MATLAB 2019a and later for the readmatrix function.

BEFORE USING THE PROGRAM, CHANGE THE VARIABLE "savelocation" TO YOUR DESIRED FOLDER TO SAVE THE FIGURES INTO. INSTRUCTIONS AT THE TOP OF THE CODE.

For the "2D Folder Input" box, copy the file path of the folder for the acquisition of the 2D experiment you're trying to plot, e.g. "user/nmr_data/nmr_experiment/1".

For the 1D spectra paste the ascii-spec.txt file into the "Input F1/F2 Dimension" box. To generate this, first input "convbin2asc" (no quotes) into the command line of topspin, and copy the file path generated in the experiment acquisition folder, e.g. "user/nmr_data/nmr_experiment/1/pdata/1/ascii-spec.txt".

Input these file paths, select the corresponding procurement number for the 2D, and nucleus for the 1Ds, then push the "Load Data" button.

Next use the sliders to select a threshold factor, and number of contour levels, then push "Plot". The spectrum will plot in a new window after a few seconds, if you want to change the threshold factor (I've found this to be trial and error depending on amount of signal), or number of contour levels you can just push "Plot" again and a new figure will appear (without replacing the old one).

After generating a figure you like, input a desired file name into the "Input Save File Name" box and push the "Save" button.

Troubleshooting:
- If you're trying to plot a 2D with a proc. no. higher than 5, you can either add more options into the curly brackets on line 17, or in topspin just use the au program "wrp" and choose a number from 1-5. Usually it should be proc. no. 1.
- If you're having trouble saving, ensure that the variable "savelocation" is equal to a real PATH to a folder. The default is set as ~ which should be the home directory.
- If the progam can't find a real path for the F1 dimension spectrum (either because it's a bad path or you just didn't put it) there will be a message in the command line, both when you load data and when you plot the graph.
- If you don't input correct paths for the F2 dimension or the 2D data, there will also be a message in the command line, then an error will show.

If you still have issues, feel free to contact me at lgordon@ccny.cuny.edu.
